<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36" version="28.2.5">
  <diagram name="Clean Architecture" id="clean-arch">
    <mxGraphModel dx="1526" dy="1135" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" background="none" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="Template App - Clean Architecture Layers" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="280" y="30" width="600" height="40" as="geometry" />
        </mxCell>
        <mxCell id="layer-external" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1e88e5;strokeWidth=3;verticalAlign=top;fontSize=16;fontStyle=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="80" y="100" width="1000" height="220" as="geometry" />
        </mxCell>
        <mxCell id="layer-external-label" value="Presentation Layer (Controllers)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="100" y="110" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="layer-domain" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e9;strokeColor=#43a047;strokeWidth=3;verticalAlign=top;fontSize=16;fontStyle=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="80" y="360" width="1000" height="200" as="geometry" />
        </mxCell>
        <mxCell id="layer-domain-label" value="Domain Layer (Business Logic)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="100" y="370" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="user-service" value="&lt;b&gt;UserService&lt;/b&gt;&lt;br&gt;(Business Operations)&lt;br&gt;&lt;br&gt;• getAllUsers()&lt;br&gt;• getUserById(id)&lt;br&gt;• createUser(name, email)&lt;br&gt;• updateUser(id, name, email)&lt;br&gt;• deleteUser(id)&lt;br&gt;• searchUsersByName(query)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#388e3c;strokeWidth=2;align=center;verticalAlign=middle;fontSize=12;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="320" y="400" width="540" height="140" as="geometry" />
        </mxCell>
        <mxCell id="layer-persistence" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#fb8c00;strokeWidth=3;verticalAlign=top;fontSize=16;fontStyle=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="80" y="600" width="1000" height="180" as="geometry" />
        </mxCell>
        <mxCell id="layer-persistence-label" value="Persistence Layer (Data Access)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="100" y="610" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="exposed-dsl" value="&lt;b&gt;Exposed DSL&lt;/b&gt;&lt;br&gt;(Users Table Definition)&lt;br&gt;&lt;br&gt;• Users object (Table)&lt;br&gt;• User data class (Entity)&lt;br&gt;• Transaction management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe0b2;strokeColor=#f57c00;strokeWidth=2;align=center;verticalAlign=middle;fontSize=12;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="120" y="650" width="420" height="110" as="geometry" />
        </mxCell>
        <mxCell id="db-config" value="&lt;b&gt;DatabaseConfig&lt;/b&gt;&lt;br&gt;&lt;br&gt;• Connection setup&lt;br&gt;• Schema creation&lt;br&gt;• SQLite configuration" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe0b2;strokeColor=#f57c00;strokeWidth=2;align=center;verticalAlign=middle;fontSize=12;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="600" y="650" width="420" height="110" as="geometry" />
        </mxCell>
        <mxCell id="layer-database" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffebee;strokeColor=#e53935;strokeWidth=3;verticalAlign=top;fontSize=16;fontStyle=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="80" y="820" width="1000" height="120" as="geometry" />
        </mxCell>
        <mxCell id="layer-database-label" value="Database Layer" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="100" y="830" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sqlite-db" value="&lt;b&gt;SQLite Database&lt;/b&gt;&lt;br&gt;&lt;br&gt;• File: data/template.db&lt;br&gt;• Table: users (id, name, email, created_at)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcdd2;strokeColor=#c62828;strokeWidth=2;align=center;verticalAlign=middle;fontSize=12;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="320" y="860" width="540" height="70" as="geometry" />
        </mxCell>
        <mxCell id="arrow3" value="" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#43a047;exitX=0.35;exitY=1;entryX=0.5;entryY=0;rounded=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" source="user-service" target="exposed-dsl" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="500" y="590" as="sourcePoint" />
            <mxPoint x="550" y="540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow3-label" value="uses" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="367" y="570" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="arrow4" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#43a047;exitX=0.65;exitY=1;entryX=0.5;entryY=0;rounded=1;dashed=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" source="user-service" target="db-config" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="500" y="590" as="sourcePoint" />
            <mxPoint x="550" y="540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow4-label" value="configured by" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="712" y="570" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="arrow5" value="" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#fb8c00;exitX=0.5;exitY=1;entryX=0.25;entryY=0;rounded=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" source="exposed-dsl" target="sqlite-db" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="500" y="810" as="sourcePoint" />
            <mxPoint x="550" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow5-label" value="queries via SQL" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="280" y="785" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="arrow6" value="" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#fb8c00;exitX=0.5;exitY=1;entryX=0.75;entryY=0;rounded=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" source="db-config" target="sqlite-db" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="500" y="810" as="sourcePoint" />
            <mxPoint x="550" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow6-label" value="manages connection" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="785" y="785" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666;strokeWidth=2;verticalAlign=top;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="80" y="980" width="1000" height="190" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="Architecture Principles" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="100" y="990" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend-text" value="&lt;b&gt;Technology Stack:&lt;/b&gt;&lt;br&gt;• Spring Boot 3.4.10 + Kotlin 2.2.20 + JVM 21&lt;br&gt;• Exposed 0.61.0 (Kotlin SQL DSL) + SQLite&lt;br&gt;• Thymeleaf + HTMX 1.9.12 + Alpine.js 3.14.1 + Bulma 1.0.2&lt;br&gt;&lt;br&gt;&lt;b&gt;Layer Dependencies:&lt;/b&gt;&lt;br&gt;• Controllers depend on Services (Domain Layer)&lt;br&gt;• Services depend on Data Access (Persistence Layer)&lt;br&gt;• No circular dependencies - clean unidirectional flow" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" parent="1" vertex="1">
          <mxGeometry x="100" y="1020" width="950" height="140" as="geometry" />
        </mxCell>
        <mxCell id="Gzl-iFhIwqizHuEz_GNL-6" value="&lt;b&gt;HomeController&lt;/b&gt;&lt;br&gt;(Web / Thymeleaf)&lt;br&gt;&lt;br&gt;• GET / → home&lt;br&gt;• GET /home → home" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;strokeWidth=2;align=center;verticalAlign=middle;fontSize=12;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="120" y="150" width="180" height="150" as="geometry" />
        </mxCell>
        <mxCell id="Gzl-iFhIwqizHuEz_GNL-7" value="&lt;b&gt;DemoController&lt;/b&gt;&lt;br&gt;(Web / HTMX)&lt;br&gt;&lt;br&gt;• GET /demo → demo&lt;br&gt;• GET /demo/widget&lt;br&gt;• GET /demo/users&lt;br&gt;• POST /demo/users&lt;br&gt;• DELETE /demo/users/{id}" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;strokeWidth=2;align=center;verticalAlign=middle;fontSize=12;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="330" y="150" width="200" height="150" as="geometry" />
        </mxCell>
        <mxCell id="Gzl-iFhIwqizHuEz_GNL-8" value="&lt;b&gt;ChartController&lt;/b&gt;&lt;br&gt;(REST API)&lt;br&gt;&lt;br&gt;• GET /rest-api/chart-data" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;strokeWidth=2;align=center;verticalAlign=middle;fontSize=12;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="560" y="150" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Gzl-iFhIwqizHuEz_GNL-9" value="&lt;b&gt;HelloController&lt;/b&gt;&lt;br&gt;(REST API)&lt;br&gt;&lt;br&gt;• GET /rest-api/hello" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;strokeWidth=2;align=center;verticalAlign=middle;fontSize=12;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" vertex="1" parent="1">
          <mxGeometry x="810" y="150" width="210" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Gzl-iFhIwqizHuEz_GNL-10" value="calls" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#1e88e5;exitX=0.5;exitY=1;entryX=0.5;entryY=0;rounded=1;sketch=1;curveFitting=1;jiggle=2;spacingTop=3;spacingLeft=6;spacingBottom=3;spacingRight=6;fontFamily=Comic Sans MS;" edge="1" parent="1" source="Gzl-iFhIwqizHuEz_GNL-7" target="user-service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
